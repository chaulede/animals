<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¬éŸ³è¯†åŠ¨ç‰© - ä¸­æ–‡å­¦ä¹ </title>
    <style>
        body { font-family: 'PingFang SC', 'Microsoft YaHei', sans-serif; text-align: center; background-color: #f7f9fc; padding: 20px; margin: 0; }
        .game-container { max-width: 500px; margin: 20px auto; background: white; padding: 25px; border-radius: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
        .animal-image { width: 100%; max-width: 250px; height: auto; border-radius: 15px; margin: 15px 0; border: 3px solid #eee; cursor: pointer; transition: transform 0.2s; }
        .animal-image:active { transform: scale(0.95); }
        .hint-text { color: #888; font-size: 0.9rem; margin-bottom: 20px; }
        .options-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
        button { padding: 12px; font-size: 1.4rem; cursor: pointer; border: 2px solid #e0e0e0; background: #fff; border-radius: 10px; transition: 0.2s; outline: none; }
        button:hover:not(:disabled) { border-color: #4a90e2; background: #f0f7ff; transform: translateY(-2px); }
        button:disabled { background: #f9f9f9; color: #ccc; cursor: not-allowed; border-color: #eee; }
        .pinyin { display: block; font-size: 0.85rem; color: #666; margin-top: 4px; }
        #feedback { height: 40px; margin-top: 20px; font-size: 1.4rem; font-weight: bold; }
        #start-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(255,255,255,0.98); display: flex; align-items: center; justify-content: center; z-index: 100; }
        .start-btn { padding: 20px 50px; font-size: 1.8rem; background: #4a90e2; color: white; border: none; border-radius: 50px; cursor: pointer; box-shadow: 0 4px 15px rgba(74,144,226,0.3); }
    </style>
</head>
<body>

<div id="start-screen">
    <button class="start-btn" onclick="startGame()">å¼€å§‹å­¦ä¹  ğŸ”Š</button>
</div>

<div class="game-container">
    <h1>ğŸ”Š å¬éŸ³é€‰è¯</h1>
    <div id="feedback"></div>
    <div onclick="playSequence()">
        <img id="target-img" src="" alt="åŠ è½½ä¸­..." class="animal-image">
        <p class="hint-text">ç‚¹å‡»å›¾ç‰‡å†å¬ä¸€éå«å£°å’Œæœ—è¯»</p>
    </div>
    <div class="options-grid" id="btn-group"></div>
</div>

<script>
    // åŠ¨ç‰©æ•°æ®é…ç½® 
    const animals = [
        { name: 'ç‹—', pinyin: 'gÇ’u', img: 'dog.png', sound: 'dog.mp3' },
        { name: 'é¸¡', pinyin: 'jÄ«', img: 'rooster.png', sound: 'rooster.mp3' },
        { name: 'é©¬', pinyin: 'mÇ', img: 'horse.png', sound: 'horse.mp3' },
        { name: 'é¸­', pinyin: 'yÄ', img: 'duck.png', sound: 'duck.mp3' },
        { name: 'ç‰›', pinyin: 'niÃº', img: 'cow.png', sound: 'cow.mp3' },
        { name: 'çŒª', pinyin: 'zhÅ«', img: 'pig.png', sound: 'pig.mp3' },
        { name: 'å…”', pinyin: 'tÃ¹', img: 'rabbit.png', sound: 'rabbit.mp3' },
        { name: 'é¹…', pinyin: 'Ã©', img: 'goose.png', sound: 'goose.mp3' },
        { name: 'ç¾Š', pinyin: 'yÃ¡ng', img: 'sheep.png', sound: 'sheep.mp3' },
        { name: 'çŒ«', pinyin: 'mÄo', img: 'cat.png', sound: 'cat.mp3' }
    ];

    let current = {};
    let canClick = true;

    // ä½¿ç”¨ç³»ç»Ÿè¯­éŸ³åˆæˆ 
    function speak(text) {
        const msg = new SpeechSynthesisUtterance();
        msg.text = text;
        msg.lang = 'zh-CN'; // è®¾ç½®ä¸ºä¸­æ–‡
        msg.rate = 0.5;    // è¯­é€Ÿç¨å¾®æ…¢ä¸€ç‚¹
        window.speechSynthesis.speak(msg);
    }

    function startGame() {
        document.getElementById('start-screen').style.display = 'none';
        initRound();
    }

    // æ’­æ”¾åºåˆ—ï¼šå…ˆæ’­æ”¾å«å£°éŸ³é¢‘ï¼Œç»“æŸåç”±ç³»ç»Ÿæœ—è¯»ä¸­æ–‡ 
    function playSequence() {
        if (!current.sound) return;
        
        const audioSound = new Audio('./audio/' + current.sound);
        audioSound.play().catch(e => console.log("å«å£°æ’­æ”¾è¢«æ‹¦æˆª"));
        
        audioSound.onended = () => {
            setTimeout(() => {
                speak(current.name); // ç³»ç»Ÿæœ—è¯»åŠ¨ç‰©åå­— 
            }, 300);
        };
    }

    function initRound() {
        canClick = true;
        document.getElementById('feedback').innerText = "";
        current = animals[Math.floor(Math.random() * animals.length)];
        
        document.getElementById('target-img').src = './images/' + current.img;
        
        setTimeout(playSequence, 500);

        let choices = [current];
        while (choices.length < 4) {
            let r = animals[Math.floor(Math.random() * animals.length)];
            if (!choices.find(x => x.name === r.name)) choices.push(r);
        }
        choices.sort(() => Math.random() - 0.5);

        const group = document.getElementById('btn-group');
        group.innerHTML = "";
        choices.forEach(item => {
            const btn = document.createElement('button');
            btn.innerHTML = `${item.name}<span class="pinyin">${item.pinyin}</span>`;
            btn.onclick = () => check(item.name, btn);
            group.appendChild(btn);
        });
    }

    function check(selectedName, clickedBtn) {
        if (!canClick) return;
        const fb = document.getElementById('feedback');
        
        if (selectedName === current.name) {
            canClick = false;
            fb.innerText = "â­ æ­£ç¡®ï¼";
            fb.style.color = "#2ecc71";
            clickedBtn.style.borderColor = "#2ecc71";
            clickedBtn.style.background = "#eafaf1";
            
            speak(current.name); // é€‰å¯¹åå†æ¬¡æœ—è¯» 
            
            setTimeout(initRound, 2000);
        } else {
            fb.innerText = "å†å¬å¬çœ‹ï¼ŸğŸ‘‚";
            fb.style.color = "#e74c3c";
            clickedBtn.disabled = true;
        }
    }
</script>
</body>
</html>

